# ============================================
# FICHIER DE CONFIGURATION PRODUCTION
# Maisons à Rénover
# ============================================
#
# INSTRUCTIONS:
# 1. Copier ce fichier vers .env.prod
# 2. Remplacer TOUS les placeholders par vos vraies valeurs
# 3. NE JAMAIS committer .env.prod dans git
#
# ============================================

# ============================================
# APPLICATION
# ============================================
NODE_ENV=production
PORT=3000

# URL de l'application (sans slash final)
NEXT_PUBLIC_APP_URL=https://maisons-a-renover.fr
NEXTAUTH_URL=https://maisons-a-renover.fr

# ============================================
# BASE DE DONNÉES MONGODB
# ============================================
# En Docker, utiliser le nom du service 'db'
MONGODB_URI=mongodb://db:27017/maisonsarenover_prod
MONGODB_DB_NAME=maisonsarenover_prod

# ============================================
# AUTHENTIFICATION - NextAuth
# ============================================
# Secret pour le chiffrement des tokens JWT
# Générer avec: openssl rand -base64 32
NEXTAUTH_SECRET=VOTRE_SECRET_NEXTAUTH_ICI

# Trust host (nécessaire en production derrière un reverse proxy)
AUTH_TRUST_HOST=true

# ============================================
# AUTHENTIFICATION - Google OAuth
# ============================================
# Créer un projet sur https://console.cloud.google.com/
# Configurer OAuth 2.0 dans "APIs & Services" > "Credentials"
#
# URIs de redirection autorisées à ajouter dans Google Cloud Console:
#   - https://maisons-a-renover.fr/api/auth/callback/google
#
GOOGLE_CLIENT_ID=VOTRE_GOOGLE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=VOTRE_GOOGLE_CLIENT_SECRET

# ============================================
# EMAIL - SMTP
# ============================================
# Configuration pour l'envoi d'emails
# Exemples: Gmail, SendGrid, Mailgun, Amazon SES
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=votre-email@gmail.com
SMTP_PASSWORD=VOTRE_APP_PASSWORD_GMAIL

# Email expéditeur (format: Nom <email@domain.com>)
FROM_EMAIL=Maisons à Rénover <noreply@maisons-a-renover.fr>

# ============================================
# STRIPE - Paiements
# ============================================
# Clés depuis https://dashboard.stripe.com/apikeys
# ⚠️ Utiliser les clés LIVE en production (sk_live_...)
STRIPE_SECRET_KEY=sk_live_VOTRE_CLE_SECRETE_STRIPE
STRIPE_PUBLISHABLE_KEY=pk_live_VOTRE_CLE_PUBLIQUE_STRIPE

# Webhook secret depuis https://dashboard.stripe.com/webhooks
# Créer un webhook pointant vers: https://maisons-a-renover.fr/api/stripe/webhook
# Événements à écouter:
#   - checkout.session.completed
#   - customer.subscription.created
#   - customer.subscription.updated
#   - customer.subscription.deleted
#   - invoice.payment_succeeded
#   - invoice.payment_failed
STRIPE_WEBHOOK_SECRET=whsec_VOTRE_WEBHOOK_SECRET

# ============================================
# STRIPE - Price IDs (Abonnements)
# ============================================
# Créer les produits et prix dans Stripe Dashboard
# https://dashboard.stripe.com/products
#
# Pack Starter - 39€/mois (lancement) puis 49€/mois
STRIPE_PRICE_ID_STARTER=price_VOTRE_PRICE_ID_STARTER

# Pack Pro - 99€/mois
STRIPE_PRICE_ID_PRO=price_VOTRE_PRICE_ID_PRO

# Pack Premium - 199€/mois
STRIPE_PRICE_ID_PREMIUM=price_VOTRE_PRICE_ID_PREMIUM

# ============================================
# STRIPE - Price IDs (Packs CPC)
# ============================================
# Paiements one-time pour les crédits CPC
STRIPE_PRICE_ID_CPC_20=price_VOTRE_PRICE_ID_CPC_20
STRIPE_PRICE_ID_CPC_50=price_VOTRE_PRICE_ID_CPC_50
STRIPE_PRICE_ID_CPC_100=price_VOTRE_PRICE_ID_CPC_100
STRIPE_PRICE_ID_CPC_200=price_VOTRE_PRICE_ID_CPC_200

# ============================================
# OPTIONNEL - Analytics
# ============================================
# Vercel Analytics (si déployé sur Vercel)
# VERCEL_ANALYTICS_ID=

# ============================================
# OPTIONNEL - Logs / Debug
# ============================================
# Niveau de log (error, warn, info, debug)
# LOG_LEVEL=info

# ============================================
# RAPPEL - CONFIGURATION GOOGLE CLOUD
# ============================================
# 1. Aller sur https://console.cloud.google.com/
# 2. Créer un projet ou sélectionner le projet existant
# 3. APIs & Services > Credentials > Create Credentials > OAuth 2.0 Client ID
# 4. Type: Web application
# 5. Ajouter les URIs de redirection:
#    - https://maisons-a-renover.fr/api/auth/callback/google
# 6. Ajouter les origines JavaScript autorisées:
#    - https://maisons-a-renover.fr
#    - https://www.maisons-a-renover.fr
# 7. Copier Client ID et Client Secret dans ce fichier

# ============================================
# RAPPEL - CONFIGURATION STRIPE WEBHOOK
# ============================================
# 1. Aller sur https://dashboard.stripe.com/webhooks
# 2. Ajouter un endpoint:
#    URL: https://maisons-a-renover.fr/api/stripe/webhook
# 3. Événements à sélectionner:
#    - checkout.session.completed
#    - customer.subscription.created
#    - customer.subscription.updated
#    - customer.subscription.deleted
#    - invoice.payment_succeeded
#    - invoice.payment_failed
# 4. Copier le "Signing secret" (whsec_...) dans STRIPE_WEBHOOK_SECRET
